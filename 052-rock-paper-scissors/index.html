<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>052 - Rock Paper Scissors ‚úä‚úã‚úåÔ∏è</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 0 0 20px #e94560;
        }
        .game-container {
            max-width: 500px;
            width: 100%;
            text-align: center;
        }
        .score-board {
            display: flex;
            justify-content: space-around;
            margin: 30px 0;
            background: rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 15px;
        }
        .score {
            text-align: center;
        }
        .score-label {
            font-size: 1rem;
            color: #a0a0a0;
            margin-bottom: 5px;
        }
        .score-value {
            font-size: 3rem;
            font-weight: bold;
        }
        .player-score .score-value { color: #64ffda; }
        .cpu-score .score-value { color: #ff6b6b; }
        .tie-score .score-value { color: #ffd93d; }
        .battle-area {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 30px 0;
            min-height: 150px;
        }
        .fighter {
            text-align: center;
        }
        .fighter-label {
            font-size: 0.9rem;
            color: #a0a0a0;
            margin-bottom: 10px;
        }
        .choice {
            font-size: 5rem;
            animation: pulse 0.5s ease;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        .vs {
            font-size: 2rem;
            color: #e94560;
            font-weight: bold;
        }
        .result {
            font-size: 1.8rem;
            padding: 15px;
            margin: 20px 0;
            border-radius: 10px;
            min-height: 60px;
        }
        .result.win {
            background: rgba(100, 255, 218, 0.2);
            color: #64ffda;
        }
        .result.lose {
            background: rgba(255, 107, 107, 0.2);
            color: #ff6b6b;
        }
        .result.tie {
            background: rgba(255, 217, 61, 0.2);
            color: #ffd93d;
        }
        .choices {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }
        .choice-btn {
            width: 100px;
            height: 100px;
            font-size: 3rem;
            border: 3px solid rgba(255,255,255,0.2);
            border-radius: 50%;
            background: rgba(255,255,255,0.05);
            cursor: pointer;
            transition: all 0.3s;
        }
        .choice-btn:hover {
            transform: scale(1.1);
            border-color: #e94560;
            background: rgba(233, 69, 96, 0.2);
            box-shadow: 0 0 30px rgba(233, 69, 96, 0.5);
        }
        .choice-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .choice-btn:active {
            transform: scale(0.95);
        }
        .countdown {
            font-size: 4rem;
            color: #e94560;
            animation: countPulse 0.5s ease;
        }
        @keyframes countPulse {
            0% { transform: scale(0.5); opacity: 0; }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); opacity: 1; }
        }
        .streak {
            margin-top: 20px;
            color: #a0a0a0;
        }
        .streak-value {
            color: #64ffda;
            font-weight: bold;
        }
        .mode-toggle {
            margin-top: 20px;
        }
        .mode-btn {
            padding: 10px 20px;
            margin: 5px;
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 20px;
            background: transparent;
            color: #fff;
            cursor: pointer;
            transition: all 0.3s;
        }
        .mode-btn:hover, .mode-btn.active {
            background: #e94560;
            border-color: #e94560;
        }
        .history {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        .history-item {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }
        .history-item.w { background: rgba(100, 255, 218, 0.3); }
        .history-item.l { background: rgba(255, 107, 107, 0.3); }
        .history-item.t { background: rgba(255, 217, 61, 0.3); }
    </style>
</head>
<body>
    <h1>‚úä‚úã‚úåÔ∏è Rock Paper Scissors</h1>
    <div class="game-container">
        <div class="score-board">
            <div class="score player-score">
                <div class="score-label">You</div>
                <div class="score-value" id="playerScore">0</div>
            </div>
            <div class="score tie-score">
                <div class="score-label">Ties</div>
                <div class="score-value" id="tieScore">0</div>
            </div>
            <div class="score cpu-score">
                <div class="score-label">CPU</div>
                <div class="score-value" id="cpuScore">0</div>
            </div>
        </div>

        <div class="battle-area">
            <div class="fighter">
                <div class="fighter-label">You</div>
                <div class="choice" id="playerChoice">‚ùì</div>
            </div>
            <div class="vs">VS</div>
            <div class="fighter">
                <div class="fighter-label">CPU</div>
                <div class="choice" id="cpuChoice">‚ùì</div>
            </div>
        </div>

        <div class="result" id="result">Choose your weapon!</div>

        <div class="choices">
            <button class="choice-btn" data-choice="rock" id="rockBtn">‚úä</button>
            <button class="choice-btn" data-choice="paper" id="paperBtn">‚úã</button>
            <button class="choice-btn" data-choice="scissors" id="scissorsBtn">‚úåÔ∏è</button>
        </div>

        <div class="streak">
            Win Streak: <span class="streak-value" id="streak">0</span> | 
            Best: <span class="streak-value" id="bestStreak">0</span>
        </div>

        <div class="history" id="history"></div>

        <div class="mode-toggle">
            <button class="mode-btn active" data-mode="normal">Normal</button>
            <button class="mode-btn" data-mode="best3">Best of 3</button>
            <button class="mode-btn" data-mode="best5">Best of 5</button>
        </div>
    </div>

    <script>
        const CHOICES = ['rock', 'paper', 'scissors'];
        const EMOJIS = { rock: '‚úä', paper: '‚úã', scissors: '‚úåÔ∏è' };
        
        let scores = { player: 0, cpu: 0, ties: 0 };
        let streak = 0;
        let bestStreak = parseInt(localStorage.getItem('rps-best-streak') || '0');
        let history = [];
        let mode = 'normal';
        let roundScores = { player: 0, cpu: 0 };
        let playing = false;

        const playerChoiceEl = document.getElementById('playerChoice');
        const cpuChoiceEl = document.getElementById('cpuChoice');
        const resultEl = document.getElementById('result');
        const playerScoreEl = document.getElementById('playerScore');
        const cpuScoreEl = document.getElementById('cpuScore');
        const tieScoreEl = document.getElementById('tieScore');
        const streakEl = document.getElementById('streak');
        const bestStreakEl = document.getElementById('bestStreak');
        const historyEl = document.getElementById('history');
        const buttons = document.querySelectorAll('.choice-btn');
        const modeButtons = document.querySelectorAll('.mode-btn');

        function updateUI() {
            playerScoreEl.textContent = scores.player;
            cpuScoreEl.textContent = scores.cpu;
            tieScoreEl.textContent = scores.ties;
            streakEl.textContent = streak;
            bestStreakEl.textContent = bestStreak;
        }

        function updateHistory(result) {
            history.push(result);
            if (history.length > 20) history.shift();
            
            historyEl.innerHTML = history.map(r => 
                `<div class="history-item ${r}">${r === 'w' ? '‚úì' : r === 'l' ? '‚úó' : '‚àí'}</div>`
            ).join('');
        }

        function determineWinner(player, cpu) {
            if (player === cpu) return 'tie';
            if (
                (player === 'rock' && cpu === 'scissors') ||
                (player === 'paper' && cpu === 'rock') ||
                (player === 'scissors' && cpu === 'paper')
            ) {
                return 'win';
            }
            return 'lose';
        }

        function getCPUChoice() {
            return CHOICES[Math.floor(Math.random() * CHOICES.length)];
        }

        async function play(playerChoice) {
            if (playing) return;
            playing = true;
            buttons.forEach(btn => btn.disabled = true);

            // Countdown animation
            for (let i = 3; i >= 1; i--) {
                playerChoiceEl.innerHTML = `<span class="countdown">${i}</span>`;
                cpuChoiceEl.innerHTML = `<span class="countdown">${i}</span>`;
                await new Promise(r => setTimeout(r, 400));
            }

            const cpuChoice = getCPUChoice();
            
            playerChoiceEl.textContent = EMOJIS[playerChoice];
            cpuChoiceEl.textContent = EMOJIS[cpuChoice];

            const result = determineWinner(playerChoice, cpuChoice);

            if (mode === 'normal') {
                handleNormalMode(result, playerChoice, cpuChoice);
            } else {
                handleSeriesMode(result, playerChoice, cpuChoice);
            }

            buttons.forEach(btn => btn.disabled = false);
            playing = false;
        }

        function handleNormalMode(result, playerChoice, cpuChoice) {
            if (result === 'win') {
                scores.player++;
                streak++;
                if (streak > bestStreak) {
                    bestStreak = streak;
                    localStorage.setItem('rps-best-streak', bestStreak);
                }
                resultEl.textContent = `üéâ You Win! ${playerChoice} beats ${cpuChoice}`;
                resultEl.className = 'result win';
                updateHistory('w');
            } else if (result === 'lose') {
                scores.cpu++;
                streak = 0;
                resultEl.textContent = `üòî You Lose! ${cpuChoice} beats ${playerChoice}`;
                resultEl.className = 'result lose';
                updateHistory('l');
            } else {
                scores.ties++;
                resultEl.textContent = `ü§ù It's a Tie!`;
                resultEl.className = 'result tie';
                updateHistory('t');
            }
            updateUI();
        }

        function handleSeriesMode(result, playerChoice, cpuChoice) {
            const winsNeeded = mode === 'best3' ? 2 : 3;
            
            if (result === 'win') {
                roundScores.player++;
                resultEl.textContent = `Round: You win! (${roundScores.player}-${roundScores.cpu})`;
                resultEl.className = 'result win';
            } else if (result === 'lose') {
                roundScores.cpu++;
                resultEl.textContent = `Round: CPU wins! (${roundScores.player}-${roundScores.cpu})`;
                resultEl.className = 'result lose';
            } else {
                resultEl.textContent = `Round: Tie! (${roundScores.player}-${roundScores.cpu})`;
                resultEl.className = 'result tie';
            }

            // Check for series winner
            if (roundScores.player >= winsNeeded) {
                scores.player++;
                streak++;
                if (streak > bestStreak) {
                    bestStreak = streak;
                    localStorage.setItem('rps-best-streak', bestStreak);
                }
                resultEl.textContent = `üèÜ Series Win! You won ${roundScores.player}-${roundScores.cpu}`;
                updateHistory('w');
                roundScores = { player: 0, cpu: 0 };
            } else if (roundScores.cpu >= winsNeeded) {
                scores.cpu++;
                streak = 0;
                resultEl.textContent = `üíî Series Loss! CPU won ${roundScores.cpu}-${roundScores.player}`;
                updateHistory('l');
                roundScores = { player: 0, cpu: 0 };
            }

            updateUI();
        }

        buttons.forEach(btn => {
            btn.addEventListener('click', () => play(btn.dataset.choice));
        });

        modeButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                modeButtons.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                mode = btn.dataset.mode;
                roundScores = { player: 0, cpu: 0 };
                resultEl.textContent = mode === 'normal' ? 
                    'Choose your weapon!' : 
                    `Best of ${mode === 'best3' ? '3' : '5'} - Choose!`;
                resultEl.className = 'result';
            });
        });

        // Keyboard support
        document.addEventListener('keydown', (e) => {
            if (e.key === '1' || e.key === 'r') play('rock');
            if (e.key === '2' || e.key === 'p') play('paper');
            if (e.key === '3' || e.key === 's') play('scissors');
        });

        updateUI();
        bestStreakEl.textContent = bestStreak;
    </script>
</body>
</html>
